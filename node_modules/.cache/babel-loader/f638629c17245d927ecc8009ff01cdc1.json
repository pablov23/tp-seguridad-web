{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.default = makeAsyncScript;\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require(\"hoist-non-react-statics\");\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar SCRIPT_MAP = {}; // A counter used to generate a unique id for each component that uses the function\n\nvar idCount = 0;\n\nfunction makeAsyncScript(getScriptURL, options) {\n  options = options || {};\n  return function wrapWithAsyncScript(WrappedComponent) {\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n    var AsyncScriptLoader = function (_Component) {\n      _inherits(AsyncScriptLoader, _Component);\n\n      function AsyncScriptLoader(props, context) {\n        _classCallCheck(this, AsyncScriptLoader);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n        _this.state = {};\n        _this.__scriptURL = \"\";\n        return _this;\n      }\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderGetScriptLoaderID = function asyncScriptLoaderGetScriptLoaderID() {\n        if (!this.__scriptLoaderID) {\n          this.__scriptLoaderID = \"async-script-loader-\" + idCount++;\n        }\n\n        return this.__scriptLoaderID;\n      };\n\n      AsyncScriptLoader.prototype.setupScriptURL = function setupScriptURL() {\n        this.__scriptURL = typeof getScriptURL === \"function\" ? getScriptURL() : getScriptURL;\n        return this.__scriptURL;\n      };\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderHandleLoad = function asyncScriptLoaderHandleLoad(state) {\n        var _this2 = this; // use reacts setState callback to fire props.asyncScriptOnLoad with new state/entry\n\n\n        this.setState(state, function () {\n          return _this2.props.asyncScriptOnLoad && _this2.props.asyncScriptOnLoad(_this2.state);\n        });\n      };\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderTriggerOnScriptLoaded = function asyncScriptLoaderTriggerOnScriptLoaded() {\n        var mapEntry = SCRIPT_MAP[this.__scriptURL];\n\n        if (!mapEntry || !mapEntry.loaded) {\n          throw new Error(\"Script is not loaded.\");\n        }\n\n        for (var obsKey in mapEntry.observers) {\n          mapEntry.observers[obsKey](mapEntry);\n        }\n\n        delete window[options.callbackName];\n      };\n\n      AsyncScriptLoader.prototype.componentDidMount = function componentDidMount() {\n        var _this3 = this;\n\n        var scriptURL = this.setupScriptURL();\n        var key = this.asyncScriptLoaderGetScriptLoaderID();\n        var _options = options,\n            globalName = _options.globalName,\n            callbackName = _options.callbackName,\n            scriptId = _options.scriptId; // check if global object already attached to window\n\n        if (globalName && typeof window[globalName] !== \"undefined\") {\n          SCRIPT_MAP[scriptURL] = {\n            loaded: true,\n            observers: {}\n          };\n        } // check if script loading already\n\n\n        if (SCRIPT_MAP[scriptURL]) {\n          var entry = SCRIPT_MAP[scriptURL]; // if loaded or errored then \"finish\"\n\n          if (entry && (entry.loaded || entry.errored)) {\n            this.asyncScriptLoaderHandleLoad(entry);\n            return;\n          } // if still loading then callback to observer queue\n\n\n          entry.observers[key] = function (entry) {\n            return _this3.asyncScriptLoaderHandleLoad(entry);\n          };\n\n          return;\n        }\n        /*\n         * hasn't started loading\n         * start the \"magic\"\n         * setup script to load and observers\n         */\n\n\n        var observers = {};\n\n        observers[key] = function (entry) {\n          return _this3.asyncScriptLoaderHandleLoad(entry);\n        };\n\n        SCRIPT_MAP[scriptURL] = {\n          loaded: false,\n          observers: observers\n        };\n        var script = document.createElement(\"script\");\n        script.src = scriptURL;\n        script.async = true;\n\n        if (scriptId) {\n          script.id = scriptId;\n        }\n\n        var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(func) {\n          if (SCRIPT_MAP[scriptURL]) {\n            var mapEntry = SCRIPT_MAP[scriptURL];\n            var observersMap = mapEntry.observers;\n\n            for (var obsKey in observersMap) {\n              if (func(observersMap[obsKey])) {\n                delete observersMap[obsKey];\n              }\n            }\n          }\n        };\n\n        if (callbackName && typeof window !== \"undefined\") {\n          window[callbackName] = function () {\n            return _this3.asyncScriptLoaderTriggerOnScriptLoaded();\n          };\n        }\n\n        script.onload = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.loaded = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              if (callbackName) {\n                return false;\n              }\n\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        script.onerror = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n\n          if (mapEntry) {\n            mapEntry.errored = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      };\n\n      AsyncScriptLoader.prototype.componentWillUnmount = function componentWillUnmount() {\n        // Remove tag script\n        var scriptURL = this.__scriptURL;\n\n        if (options.removeOnUnmount === true) {\n          var allScripts = document.getElementsByTagName(\"script\");\n\n          for (var i = 0; i < allScripts.length; i += 1) {\n            if (allScripts[i].src.indexOf(scriptURL) > -1) {\n              if (allScripts[i].parentNode) {\n                allScripts[i].parentNode.removeChild(allScripts[i]);\n              }\n            }\n          }\n        } // Clean the observer entry\n\n\n        var mapEntry = SCRIPT_MAP[scriptURL];\n\n        if (mapEntry) {\n          delete mapEntry.observers[this.asyncScriptLoaderGetScriptLoaderID()];\n\n          if (options.removeOnUnmount === true) {\n            delete SCRIPT_MAP[scriptURL];\n          }\n        }\n      };\n\n      AsyncScriptLoader.prototype.render = function render() {\n        var globalName = options.globalName; // remove asyncScriptOnLoad from childProps\n\n        var _props = this.props,\n            asyncScriptOnLoad = _props.asyncScriptOnLoad,\n            forwardedRef = _props.forwardedRef,\n            childProps = _objectWithoutProperties(_props, [\"asyncScriptOnLoad\", \"forwardedRef\"]); // eslint-disable-line no-unused-vars\n\n\n        if (globalName && typeof window !== \"undefined\") {\n          childProps[globalName] = typeof window[globalName] !== \"undefined\" ? window[globalName] : undefined;\n        }\n\n        childProps.ref = forwardedRef;\n        return (0, _react.createElement)(WrappedComponent, childProps);\n      };\n\n      return AsyncScriptLoader;\n    }(_react.Component); // Note the second param \"ref\" provided by React.forwardRef.\n    // We can pass it along to AsyncScriptLoader as a regular prop, e.g. \"forwardedRef\"\n    // And it can then be attached to the Component.\n\n\n    var ForwardedComponent = (0, _react.forwardRef)(function (props, ref) {\n      return (0, _react.createElement)(AsyncScriptLoader, _extends({}, props, {\n        forwardedRef: ref\n      }));\n    });\n    ForwardedComponent.displayName = \"AsyncScriptLoader(\" + wrappedComponentName + \")\";\n    ForwardedComponent.propTypes = {\n      asyncScriptOnLoad: _propTypes2.default.func\n    };\n    return (0, _hoistNonReactStatics2.default)(ForwardedComponent, WrappedComponent);\n  };\n}","map":{"version":3,"sources":["/Users/pveron/Documents/facu/React-Banking-App/node_modules/react-async-script/lib/async-script-loader.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","default","makeAsyncScript","_react","require","_propTypes","_propTypes2","_interopRequireDefault","_hoistNonReactStatics","_hoistNonReactStatics2","obj","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","SCRIPT_MAP","idCount","getScriptURL","options","wrapWithAsyncScript","WrappedComponent","wrappedComponentName","displayName","name","AsyncScriptLoader","_Component","props","context","_this","state","__scriptURL","asyncScriptLoaderGetScriptLoaderID","__scriptLoaderID","setupScriptURL","asyncScriptLoaderHandleLoad","_this2","setState","asyncScriptOnLoad","asyncScriptLoaderTriggerOnScriptLoaded","mapEntry","loaded","Error","obsKey","observers","window","callbackName","componentDidMount","_this3","scriptURL","_options","globalName","scriptId","entry","errored","script","document","createElement","src","async","id","callObserverFuncAndRemoveObserver","func","observersMap","onload","observer","onerror","body","appendChild","componentWillUnmount","removeOnUnmount","allScripts","getElementsByTagName","parentNode","removeChild","render","_props","forwardedRef","childProps","undefined","ref","Component","ForwardedComponent","forwardRef","propTypes"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = makeAsyncScript;\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _hoistNonReactStatics = require(\"hoist-non-react-statics\");\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SCRIPT_MAP = {};\n\n// A counter used to generate a unique id for each component that uses the function\nvar idCount = 0;\n\nfunction makeAsyncScript(getScriptURL, options) {\n  options = options || {};\n  return function wrapWithAsyncScript(WrappedComponent) {\n    var wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n    var AsyncScriptLoader = function (_Component) {\n      _inherits(AsyncScriptLoader, _Component);\n\n      function AsyncScriptLoader(props, context) {\n        _classCallCheck(this, AsyncScriptLoader);\n\n        var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n        _this.state = {};\n        _this.__scriptURL = \"\";\n        return _this;\n      }\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderGetScriptLoaderID = function asyncScriptLoaderGetScriptLoaderID() {\n        if (!this.__scriptLoaderID) {\n          this.__scriptLoaderID = \"async-script-loader-\" + idCount++;\n        }\n        return this.__scriptLoaderID;\n      };\n\n      AsyncScriptLoader.prototype.setupScriptURL = function setupScriptURL() {\n        this.__scriptURL = typeof getScriptURL === \"function\" ? getScriptURL() : getScriptURL;\n        return this.__scriptURL;\n      };\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderHandleLoad = function asyncScriptLoaderHandleLoad(state) {\n        var _this2 = this;\n\n        // use reacts setState callback to fire props.asyncScriptOnLoad with new state/entry\n        this.setState(state, function () {\n          return _this2.props.asyncScriptOnLoad && _this2.props.asyncScriptOnLoad(_this2.state);\n        });\n      };\n\n      AsyncScriptLoader.prototype.asyncScriptLoaderTriggerOnScriptLoaded = function asyncScriptLoaderTriggerOnScriptLoaded() {\n        var mapEntry = SCRIPT_MAP[this.__scriptURL];\n        if (!mapEntry || !mapEntry.loaded) {\n          throw new Error(\"Script is not loaded.\");\n        }\n        for (var obsKey in mapEntry.observers) {\n          mapEntry.observers[obsKey](mapEntry);\n        }\n        delete window[options.callbackName];\n      };\n\n      AsyncScriptLoader.prototype.componentDidMount = function componentDidMount() {\n        var _this3 = this;\n\n        var scriptURL = this.setupScriptURL();\n        var key = this.asyncScriptLoaderGetScriptLoaderID();\n        var _options = options,\n            globalName = _options.globalName,\n            callbackName = _options.callbackName,\n            scriptId = _options.scriptId;\n\n        // check if global object already attached to window\n\n        if (globalName && typeof window[globalName] !== \"undefined\") {\n          SCRIPT_MAP[scriptURL] = { loaded: true, observers: {} };\n        }\n\n        // check if script loading already\n        if (SCRIPT_MAP[scriptURL]) {\n          var entry = SCRIPT_MAP[scriptURL];\n          // if loaded or errored then \"finish\"\n          if (entry && (entry.loaded || entry.errored)) {\n            this.asyncScriptLoaderHandleLoad(entry);\n            return;\n          }\n          // if still loading then callback to observer queue\n          entry.observers[key] = function (entry) {\n            return _this3.asyncScriptLoaderHandleLoad(entry);\n          };\n          return;\n        }\n\n        /*\n         * hasn't started loading\n         * start the \"magic\"\n         * setup script to load and observers\n         */\n        var observers = {};\n        observers[key] = function (entry) {\n          return _this3.asyncScriptLoaderHandleLoad(entry);\n        };\n        SCRIPT_MAP[scriptURL] = {\n          loaded: false,\n          observers: observers\n        };\n\n        var script = document.createElement(\"script\");\n\n        script.src = scriptURL;\n        script.async = true;\n        if (scriptId) {\n          script.id = scriptId;\n        }\n\n        var callObserverFuncAndRemoveObserver = function callObserverFuncAndRemoveObserver(func) {\n          if (SCRIPT_MAP[scriptURL]) {\n            var mapEntry = SCRIPT_MAP[scriptURL];\n            var observersMap = mapEntry.observers;\n\n            for (var obsKey in observersMap) {\n              if (func(observersMap[obsKey])) {\n                delete observersMap[obsKey];\n              }\n            }\n          }\n        };\n\n        if (callbackName && typeof window !== \"undefined\") {\n          window[callbackName] = function () {\n            return _this3.asyncScriptLoaderTriggerOnScriptLoaded();\n          };\n        }\n\n        script.onload = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n          if (mapEntry) {\n            mapEntry.loaded = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              if (callbackName) {\n                return false;\n              }\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n        script.onerror = function () {\n          var mapEntry = SCRIPT_MAP[scriptURL];\n          if (mapEntry) {\n            mapEntry.errored = true;\n            callObserverFuncAndRemoveObserver(function (observer) {\n              observer(mapEntry);\n              return true;\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      };\n\n      AsyncScriptLoader.prototype.componentWillUnmount = function componentWillUnmount() {\n        // Remove tag script\n        var scriptURL = this.__scriptURL;\n        if (options.removeOnUnmount === true) {\n          var allScripts = document.getElementsByTagName(\"script\");\n          for (var i = 0; i < allScripts.length; i += 1) {\n            if (allScripts[i].src.indexOf(scriptURL) > -1) {\n              if (allScripts[i].parentNode) {\n                allScripts[i].parentNode.removeChild(allScripts[i]);\n              }\n            }\n          }\n        }\n        // Clean the observer entry\n        var mapEntry = SCRIPT_MAP[scriptURL];\n        if (mapEntry) {\n          delete mapEntry.observers[this.asyncScriptLoaderGetScriptLoaderID()];\n          if (options.removeOnUnmount === true) {\n            delete SCRIPT_MAP[scriptURL];\n          }\n        }\n      };\n\n      AsyncScriptLoader.prototype.render = function render() {\n        var globalName = options.globalName;\n        // remove asyncScriptOnLoad from childProps\n\n        var _props = this.props,\n            asyncScriptOnLoad = _props.asyncScriptOnLoad,\n            forwardedRef = _props.forwardedRef,\n            childProps = _objectWithoutProperties(_props, [\"asyncScriptOnLoad\", \"forwardedRef\"]); // eslint-disable-line no-unused-vars\n\n\n        if (globalName && typeof window !== \"undefined\") {\n          childProps[globalName] = typeof window[globalName] !== \"undefined\" ? window[globalName] : undefined;\n        }\n        childProps.ref = forwardedRef;\n        return (0, _react.createElement)(WrappedComponent, childProps);\n      };\n\n      return AsyncScriptLoader;\n    }(_react.Component);\n\n    // Note the second param \"ref\" provided by React.forwardRef.\n    // We can pass it along to AsyncScriptLoader as a regular prop, e.g. \"forwardedRef\"\n    // And it can then be attached to the Component.\n\n\n    var ForwardedComponent = (0, _react.forwardRef)(function (props, ref) {\n      return (0, _react.createElement)(AsyncScriptLoader, _extends({}, props, { forwardedRef: ref }));\n    });\n    ForwardedComponent.displayName = \"AsyncScriptLoader(\" + wrappedComponentName + \")\";\n    ForwardedComponent.propTypes = {\n      asyncScriptOnLoad: _propTypes2.default.func\n    };\n\n    return (0, _hoistNonReactStatics2.default)(ForwardedComponent, WrappedComponent);\n  };\n}"]},"metadata":{},"sourceType":"script"}